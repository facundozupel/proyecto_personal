---
import BlogPostLayout from '@/layouts/BlogPostLayout.astro';
import { getArticleBySlug } from '@/utils/articles';

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect('/404');
}

const article = await getArticleBySlug(slug);

if (!article || article.draft) {
  return Astro.redirect('/404');
}
---

<BlogPostLayout
  title={article.title}
  description={article.description}
  author={article.author}
  date={new Date(article.publishedAt)}
  tags={article.tags}
>
  <div set:html={article.content} />
</BlogPostLayout>
